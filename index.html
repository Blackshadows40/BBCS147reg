<!DOCTYPE html>
<html lang="bn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>বাগেরহাট বহুমুখী কলেজিয়েট স্কুলের ১৪৭ তম প্রতিষ্ঠা বার্ষিকী</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Noto Sans Bengali", sans-serif;
        background-color: #f8fafc; /* Tailwind's gray-50 */
      }
      .form-label {
        @apply block text-gray-700 text-sm font-bold mb-2;
      }
      .form-input,
      .form-select {
        @apply shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-teal-500;
      }
      .form-radio-label {
        @apply ml-2 text-gray-700;
      }
      .required-star {
        color: #e53e3e; /* Tailwind's red-600 */
      }
      .countdown-box {
        @apply text-center p-4 bg-white rounded-lg shadow-md;
      }
      .countdown-number {
        @apply text-4xl lg:text-5xl font-bold text-teal-700;
      }
      .countdown-label {
        @apply text-sm text-gray-600 uppercase tracking-wider;
      }
      .tooltip-container {
        position: relative;
        display: inline-block;
      }
      .tooltip-icon {
        cursor: pointer;
        margin-left: 8px;
        color: #1a202c; /* Tailwind's gray-900 */
      }
      .tooltip-text {
        visibility: hidden;
        width: 150px;
        background-color: #1a202c;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 5px 0;
        position: absolute;
        z-index: 1;
        bottom: 125%; /* Position above the icon */
        left: 50%;
        margin-left: -75px;
        opacity: 0;
        transition: opacity 0.3s;
      }
      .tooltip-text::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: #1a202c transparent transparent transparent;
      }
      .tooltip-container:hover .tooltip-text {
        visibility: visible;
        opacity: 1;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-4xl">
      <header class="text-center mb-8">
        <h1 class="text-3xl md:text-4xl font-bold text-teal-800 mb-2">
          বাগেরহাট বহুমুখী কলেজিয়েট স্কুলের ১৪৭ তম প্রতিষ্ঠা বার্ষিকী
        </h1>
        <p class="text-lg text-gray-600">রেজিস্ট্রেশন ফরম</p>
      </header>

      <main>
        <section id="event-info" class="mb-8 p-6 bg-white rounded-lg shadow-md">
          <h2 class="text-2xl font-bold text-center text-teal-700 mb-4">
            অনুষ্ঠানের বিবরণ
          </h2>
          <p class="text-center text-gray-700 mb-4">
            আগামী <span class="font-semibold">২৩ আগস্ট ২০২৫</span> আড়ম্বরপূর্ণভাবে
            অনুষ্ঠিত হতে যাচ্ছে বাগেরহাট বহুমুখী কলেজিয়েট স্কুলের ১৪৭ তম
            প্রতিষ্ঠা বার্ষিকী। আমাদের এই ঐতিহাসিক মুহূর্তের অংশ হতে আপনাকে
            সাদর আমন্ত্রণ।
          </p>
          <div class="text-center mt-6">
            <p class="text-md font-semibold text-red-600">
              রেজিস্ট্রেশনের শেষ সময়ঃ ৩১ জুলাই, ২০২৫
            </p>
            <div
              id="countdown-timer"
              class="mt-4 grid grid-cols-2 sm:grid-cols-4 gap-4 max-w-lg mx-auto"
            >
              <div class="countdown-box">
                <div id="days" class="countdown-number">0</div>
                <div class="countdown-label">দিন</div>
              </div>
              <div class="countdown-box">
                <div id="hours" class="countdown-number">0</div>
                <div class="countdown-label">ঘন্টা</div>
              </div>
              <div class="countdown-box">
                <div id="minutes" class="countdown-number">0</div>
                <div class="countdown-label">মিনিট</div>
              </div>
              <div class="countdown-box">
                <div id="seconds" class="countdown-number">0</div>
                <div class="countdown-label">সেকেন্ড</div>
              </div>
            </div>
          </div>
        </section>

        <section
          id="registration-form"
          class="p-6 md:p-8 bg-white rounded-lg shadow-lg"
        >
          <h2 class="text-2xl font-bold text-center text-teal-700 mb-6">
            ফর্ম পূরণ করুন
          </h2>
          <form id="regForm" class="space-y-6">
            <div>
              <label class="form-label" for="email"
                >ইমেল <span class="required-star">*</span></label
              >
              <input
                class="form-input"
                id="email"
                type="email"
                placeholder="your.email@example.com"
                required
              />
            </div>

            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <label class="form-label" for="name"
                  >নামঃ <span class="required-star">*</span></label
                >
                <input
                  class="form-input"
                  id="name"
                  type="text"
                  placeholder="আপনার সম্পূর্ণ নাম"
                  required
                />
              </div>
              <div>
                <label class="form-label" for="mobile"
                  >মোবাইল নম্বরঃ <span class="required-star">*</span></label
                >
                <input
                  class="form-input"
                  id="mobile"
                  type="tel"
                  placeholder="01XXXXXXXXX"
                  required
                />
              </div>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <label class="form-label" for="fatherName">পিতার নামঃ</label>
                <input
                  class="form-input"
                  id="fatherName"
                  type="text"
                  placeholder="আপনার পিতার নাম"
                />
              </div>
              <div>
                <label class="form-label" for="motherName">মাতার নামঃ</label>
                <input
                  class="form-input"
                  id="motherName"
                  type="text"
                  placeholder="আপনার মাতার নাম"
                />
              </div>
            </div>

            <div>
              <label class="form-label" for="address">ঠিকানাঃ</label>
              <input
                class="form-input"
                id="address"
                type="text"
                placeholder="আপনার বর্তমান ঠিকানা"
              />
            </div>

            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <label class="form-label" for="profession">পেশাঃ</label>
                <input
                  class="form-input"
                  id="profession"
                  type="text"
                  placeholder="আপনার পেশা"
                />
              </div>
              <div>
                <label class="form-label" for="academicYear"
                  >শিক্ষাবর্ষঃ <span class="required-star">*</span></label
                >
                <input
                  class="form-input"
                  id="academicYear"
                  type="text"
                  placeholder="উদাহরণ: 2015-2017"
                  required
                />
              </div>
            </div>

            <div class="border-t pt-6">
              <label class="form-label"
                >নিবন্ধনের ধরণঃ <span class="required-star">*</span></label
              >
              <div class="flex flex-wrap gap-4 mt-2">
                <label class="flex items-center">
                  <input
                    type="radio"
                    name="registrationType"
                    value="current"
                    class="form-radio text-teal-600 focus:ring-teal-500"
                    required
                  />
                  <span class="form-radio-label">বর্তমান</span>
                </label>
                <label class="flex items-center">
                  <input
                    type="radio"
                    name="registrationType"
                    value="alumni"
                    class="form-radio text-teal-600 focus:ring-teal-500"
                  />
                  <span class="form-radio-label">প্রাক্তন</span>
                </label>
                <label class="flex items-center">
                  <input
                    type="radio"
                    name="registrationType"
                    value="guest"
                    class="form-radio text-teal-600 focus:ring-teal-500"
                  />
                  <span class="form-radio-label">অতিথি</span>
                </label>
              </div>
            </div>

            <div id="guest-info" class="hidden space-y-4 p-4 bg-teal-50 rounded-lg">
              <p class="font-semibold text-teal-800">অতিথি পরিচিতিঃ</p>
              <div>
                <label class="form-label" for="guestStudentName"
                  >শিক্ষার্থীর নামঃ</label
                >
                <input
                  class="form-input bg-white"
                  id="guestStudentName"
                  type="text"
                  placeholder="যে শিক্ষার্থীর সাথে এসেছেন"
                />
              </div>
              <div>
                <label class="form-label" for="guestAcademicYear"
                  >শিক্ষাবর্ষঃ</label
                >
                <input
                  class="form-input bg-white"
                  id="guestAcademicYear"
                  type="text"
                  placeholder="শিক্ষার্থীর শিক্ষাবর্ষ"
                />
              </div>
            </div>

            <div>
              <label class="form-label" for="tshirtSize"
                >টি-শার্টের মাপ: <span class="required-star">*</span></label
              >
              <select id="tshirtSize" name="tshirtSize" class="form-select" required>
                <option value="" disabled selected>নির্বাচন করুন</option>
                <option value="S">S</option>
                <option value="M">M</option>
                <option value="L">L</option>
                <option value="XL">XL</option>
                <option value="XXL">XXL</option>
              </select>
            </div>

            <div class="border-t pt-6 grid md:grid-cols-2 gap-6">
              <div>
                <label class="form-label" for="registrationFee">
                  নিবন্ধন ফিঃ (টাকায়)
                  <span class="tooltip-container">
                    <span
                      class="tooltip-icon"
                      title="পেমেন্ট নম্বর দেখতে এখানে হোভার করুন"
                    >
                      &#9432;
                    </span>
                    <span class="tooltip-text">01931 643 243</span>
                  </span>
                </label>
                <input
                  class="form-input bg-gray-200"
                  id="registrationFee"
                  type="number"
                  readonly
                />
                <p id="transactionRemarks" class="text-xs text-gray-500 mt-1 hidden"></p>
              </div>
              <div>
                <label class="form-label" for="donation">অনুদানঃ (ঐচ্ছিক)</label>
                <input
                  class="form-input"
                  id="donation"
                  type="number"
                  placeholder="ঐচ্ছিক"
                />
              </div>
            </div>

            <div>
              <label class="form-label"
                >পেমেন্ট পদ্ধতি: <span class="required-star">*</span></label
              >
              <div class="flex flex-wrap gap-4 mt-2">
                <label class="flex items-center">
                  <input
                    type="radio"
                    name="paymentMethod"
                    value="online"
                    class="form-radio text-teal-600 focus:ring-teal-500"
                    required
                  />
                  <span class="form-radio-label"
                    >অনলাইন (বিকাশ/নগদ/রকেট)-01309114757</span
                  >
                </label>
                <label class="flex items-center">
                  <input
                    type="radio"
                    name="paymentMethod"
                    value="cash"
                    class="form-radio text-teal-600 focus:ring-teal-500"
                  />
                  <span class="form-radio-label">ক্যাশ</span>
                </label>
              </div>
            </div>

            <div id="online-payment-fields" class="hidden space-y-6">
              <div>
                <label class="form-label" for="onlinePaymentMethod"
                  >পেমেন্ট মাধ্যম: <span class="required-star">*</span></label
                >
                <select
                  id="onlinePaymentMethod"
                  name="onlinePaymentMethod"
                  class="form-select"
                  required
                >
                  <option value="" disabled selected>নির্বাচন করুন</option>
                  <option value="বিকাশ">বিকাশ</option>
                  <option value="নগদ">নগদ</option>
                  <option value="রকেট">রকেট</option>
                </select>
              </div>
              <div>
                <label class="form-label" for="paymentAccount"
                  >বিকাশ/নগদ/রকেট একাউন্ট নম্বরঃ
                  <span class="required-star">*</span></label
                >
                <input
                  class="form-input"
                  id="paymentAccount"
                  type="tel"
                  placeholder="যে নম্বর থেকে টাকা পাঠিয়েছেন"
                />
              </div>
              <div>
                <label class="form-label" for="transactionId"
                  >Transaction ID: <span class="required-star">*</span></label
                >
                <input
                  class="form-input"
                  id="transactionId"
                  type="text"
                  placeholder="পেমেন্টের Transaction ID"
                />
              </div>
            </div>

            <div id="cash-payment-fields" class="hidden space-y-6">
              <div>
                <label class="form-label" for="receiverName"
                  >গ্রহনকারীর নাম: <span class="required-star">*</span></label
                >
                <input
                  class="form-input"
                  id="receiverName"
                  type="text"
                  placeholder="যিনি টাকা গ্রহণ করেছেন"
                />
              </div>
              <div>
                <label class="form-label" for="receiverNumber"
                  >গ্রহনকারীর নাম্বার: <span class="required-star">*</span></label
                >
                <input
                  class="form-input"
                  id="receiverNumber"
                  type="tel"
                  placeholder="গ্রহনকারীর মোবাইল নম্বর"
                />
              </div>
            </div>

            <div class="text-center pt-4">
              <button
                class="bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 px-8 rounded-lg focus:outline-none focus:shadow-outline transition-colors duration-300"
                type="submit"
              >
                সাবমিট করুন
              </button>
            </div>
          </form>
          <div
            id="success-message"
            class="hidden mt-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg text-center"
          >
            আপনার রেজিস্ট্রেশন সফলভাবে জমা দেওয়া হয়েছে। ধন্যবাদ!
          </div>
        </section>
      </main>

      <footer class="text-center mt-10 pt-6 border-t">
        <p class="text-gray-600">
          &copy; ২০২৫ বাগেরহাট বহুমুখী কলেজিয়েট স্কুল। সর্বস্বত্ব সংরক্ষিত।
        </p>
        <p class="text-sm text-gray-500 mt-1">
          যোগাযোগ: Mustak Ahamed - 01711652559
        </p>
        <p class="text-sm text-gray-500 mt-1">
          Developed BY: Alamin Howlader (Batch-2012)
        </p>
      </footer>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // REPLACE THIS WITH YOUR DEPLOYED GOOGLE APPS SCRIPT WEB APP URL
        // Example: const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz_YOUR_UNIQUE_ID_HERE/exec';
        const GOOGLE_APPS_SCRIPT_URL =
          "https://script.google.com/macros/s/AKfycbw1mq1Fg4Hzr1gg0sezjNNmnrJez2zmaaabpzQO5ZAcVltWLa8QW0BM2hrLPAVujGIx/exec"; // *** IMPORTANT: REPLACE THIS URL ***

        const registrationTypeRadios = document.querySelectorAll(
          'input[name="registrationType"]'
        );
        const paymentMethodRadios = document.querySelectorAll(
          'input[name="paymentMethod"]'
        );
        const registrationFeeInput = document.getElementById("registrationFee");
        const guestInfoDiv = document.getElementById("guest-info");
        const onlinePaymentFields = document.getElementById(
          "online-payment-fields"
        );
        const cashPaymentFields = document.getElementById("cash-payment-fields");
        const transactionRemarks = document.getElementById("transactionRemarks");
        const onlinePaymentMethodSelect = document.getElementById(
          "onlinePaymentMethod"
        );
        const paymentAccountInput = document.getElementById("paymentAccount");
        const transactionIdInput = document.getElementById("transactionId");
        const receiverNameInput = document.getElementById("receiverName");
        const receiverNumberInput = document.getElementById("receiverNumber");

        const fees = {
          online: {
            current: { amount: 205, charge: 5 },
            alumni: { amount: 510, charge: 10 },
            guest: { amount: 510, charge: 10 },
          },
          cash: {
            current: { amount: 200, charge: 0 },
            alumni: { amount: 500, charge: 0 },
            guest: { amount: 500, charge: 0 },
          },
        };

        // Function to update registration fee based on registration type and payment method
        function updateFee() {
          const selectedType = document.querySelector(
            'input[name="registrationType"]:checked'
          );
          const selectedPaymentMethod = document.querySelector(
            'input[name="paymentMethod"]:checked'
          );

          if (selectedType && selectedPaymentMethod) {
            const feeInfo = fees[selectedPaymentMethod.value][selectedType.value];
            if (feeInfo) {
              registrationFeeInput.value = feeInfo.amount;
              if (feeInfo.charge > 0) {
                transactionRemarks.textContent = `${feeInfo.charge} টাকা লেনদেন চার্জ অন্তর্ভুক্ত।`;
                transactionRemarks.classList.remove("hidden");
              } else {
                transactionRemarks.classList.add("hidden");
              }
            } else {
              registrationFeeInput.value = "";
              transactionRemarks.classList.add("hidden");
            }
          } else {
            registrationFeeInput.value = "";
            transactionRemarks.classList.add("hidden");
          }
        }

        // Event listener for registration type change
        registrationTypeRadios.forEach((radio) => {
          radio.addEventListener("change", function () {
            updateFee();
            if (this.value === "guest") {
              guestInfoDiv.classList.remove("hidden");
            } else {
              guestInfoDiv.classList.add("hidden");
            }
          });
        });

        // Event listener for payment method change
        paymentMethodRadios.forEach((radio) => {
          radio.addEventListener("change", function () {
            updateFee(); // Call updateFee here to reflect changes immediately
            if (this.value === "online") {
              onlinePaymentFields.classList.remove("hidden");
              cashPaymentFields.classList.add("hidden");

              // Add required attributes for online payment fields
              onlinePaymentMethodSelect.setAttribute("required", "required");
              paymentAccountInput.setAttribute("required", "required");
              transactionIdInput.setAttribute("required", "required");

              // Remove required attributes for cash payment fields
              receiverNameInput.removeAttribute("required");
              receiverNumberInput.removeAttribute("required");
            } else if (this.value === "cash") {
              onlinePaymentFields.classList.add("hidden");
              cashPaymentFields.classList.remove("hidden");

              // Remove required attributes for online payment fields
              onlinePaymentMethodSelect.removeAttribute("required");
              paymentAccountInput.removeAttribute("required");
              transactionIdInput.removeAttribute("required");

              // Add required attributes for cash payment fields
              receiverNameInput.setAttribute("required", "required");
              receiverNumberInput.setAttribute("required", "required");
            }
          });
        });

        const regForm = document.getElementById("regForm");
        const successMessage = document.getElementById("success-message");

        regForm.addEventListener("submit", async function (e) {
          e.preventDefault();
          if (!regForm.checkValidity()) {
            regForm.reportValidity();
            return;
          }

          const formData = {
            email: document.getElementById("email").value,
            name: document.getElementById("name").value,
            fatherName: document.getElementById("fatherName").value,
            motherName: document.getElementById("motherName").value,
            address: document.getElementById("address").value,
            profession: document.getElementById("profession").value,
            mobile: document.getElementById("mobile").value,
            academicYear: document.getElementById("academicYear").value,
            registrationType: document.querySelector(
              'input[name="registrationType"]:checked'
            ).value,
            guestStudentName: document.getElementById("guestStudentName").value,
            guestAcademicYear: document.getElementById("guestAcademicYear").value,
            tshirtSize: document.getElementById("tshirtSize").value,
            registrationFee: document.getElementById("registrationFee").value,
            donation: document.getElementById("donation").value,
            paymentMethod: document.querySelector(
              'input[name="paymentMethod"]:checked'
            ).value,
            // Conditional fields based on payment method
            onlinePaymentMethod:
              document.getElementById("onlinePaymentMethod").value || "N/A", // Add this line
            paymentAccount:
              document.getElementById("paymentAccount").value || "N/A",
            transactionId: document.getElementById("transactionId").value || "N/A",
            receiverName: document.getElementById("receiverName").value || "N/A",
            receiverNumber:
              document.getElementById("receiverNumber").value || "N/A",
          };

          try {
            const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
              method: "POST",
              mode: "no-cors", // Use 'no-cors' for Google Apps Script to avoid CORS issues
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(formData),
            });

            // Even with 'no-cors', we might not get a readable response from Apps Script,
            // but the request will be sent.
            // For actual response handling, Apps Script needs to return specific CORS headers.
            // Assuming the request reached Apps Script successfully.

            regForm.classList.add("hidden");
            successMessage.classList.remove("hidden");
            window.scrollTo(0, document.body.scrollHeight);
          } catch (error) {
            console.error("Error submitting form:", error);
            alert("ফর্ম জমা দিতে সমস্যা হয়েছে। অনুগ্রহ করে আবার চেষ্টা করুন।"); // Use a custom modal in a real app
          }
        });

        function updateCountdown() {
          const countdownDate = new Date("July 31, 2025 23:59:59").getTime();
          const now = new Date().getTime();
          const distance = countdownDate - now;

          if (distance < 0) {
            document.getElementById("countdown-timer").innerHTML =
              '<p class="col-span-4 text-center text-red-500 font-bold text-xl">রেজিস্ট্রেশনের সময় শেষ হয়ে গেছে!</p>';
            return;
          }

          const days = Math.floor(distance / (1000 * 60 * 60 * 24));
          const hours = Math.floor(
            (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
          );
          const minutes = Math.floor(
            (distance % (1000 * 60 * 60)) / (1000 * 60)
          );
          const seconds = Math.floor((distance % (1000 * 60)) / 1000);

          document.getElementById("days").innerText = days;
          document.getElementById("hours").innerText = hours;
          document.getElementById("minutes").innerText = minutes;
          document.getElementById("seconds").innerText = seconds;
        }

        setInterval(updateCountdown, 1000);
        updateCountdown();
        updateFee(); // Initialize fee display on page load
      });
    </script>
  </body>
</html>